def revealjsCanonicalPath = new File(revealjspath).getCanonicalPath()
def talkCanonicalPath = new File(talkpath).getCanonicalPath()

task setupRevealJs(type: Copy) {
	  from revealjsCanonicalPath
    into talkCanonicalPath
    outputs.upToDateWhen { true }
}

// Components are relatively static, shared by all talks
// (E.g., special CSS)
task setupTalkComponents(type: Copy) {
		from talkCanonicalPath + '/src/main/components'
    into talkCanonicalPath + '/out'
}

// Resources change per talk
// (E.g., images)
task setupTalkResources(type: Copy) {
		from talkCanonicalPath + '/src/main/resources'
    into (talkCanonicalPath + '/out/resources')
}

task exportJade(type: Exec, dependsOn: setupTalkResources) {
	    inputs.dir talkCanonicalPath + '/src/main/components/jade'
	    commandLine 'jade', (talkCanonicalPath + '/src/main/components/jade'), '--out', (talkCanonicalPath + '/out')
}

task export(dependsOn: exportJade)